<h1>Listing documents</h1>
<%# Document.tagged_with("OOP").by_date.paginate(:page => params[:page], :per_page => 20) %>

<%= form_tag documents_path, :method => 'get' do %>
    <%= label_tag :semester %>
    <%= collection_select(:semester, :semester_id, Semester.all, :id, :name, { :include_blank => true })  %>
    <%= label_tag :course %>
    <%= collection_select( :course, :course_id, Course.all, :id, :name, { :include_blank => true })  %>
    <%= label_tag  :lecturer %>
    <%= collection_select(:lecturer, :lecturer_id, Lecturer.all, :id, :name, { :include_blank => true })  %>
    <%= label_tag  :tags %>
    <%= text_field_tag :filter, params[:filter] %>
    <%= submit_tag "Filter", :name => nil %>
<% end %>



<table>
  <tr>
    <th>Filename</th>
    <th>Filetype</th>
    <th>Filezsize</th>
    <th>Caption</th>
    <th>Description</th>
    <th>Created at</th>
    <th>User</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @documents.each do |document| %>
<%# Document.tagged_with(params[:filter]).each do |document| %>

  <tr>
    <td><%= document.file_name %></td>
    <td><%= document.file_type %></td>
    <td><%= document.file_size %></td>
    <td><%= document.caption %></td>
    <td><%= document.description %></td>
    <td><%= document.created_at %></td>
    <td><%= document.user.name %></td>
    <td><%= link_to 'Show', document %></td>
    <td><%= link_to 'Edit', edit_document_path(document) %></td>
    <td><%= link_to 'Destroy', document, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Document', new_document_path %>

